package support

import (
	"net/http"
	"runtime/debug"

	e "github.com/test/gateway/internal/app/http/errors"
	"github.com/test/gateway/internal/app/http/handlers/support/response"
	"github.com/test/gateway/internal/sdk/http/mux"
)

const (
	buildNotFound = "Build info not found"
)

// BuildInfo returns build info.
func (h *Handler) BuildInfo(*http.Request, any) mux.Response {
	if info, ok := debug.ReadBuildInfo(); ok {
		return &response.Build{Info: info}
	}

	h.Log.Warn(buildNotFound)

	return e.New(e.InternalServerError)
}
